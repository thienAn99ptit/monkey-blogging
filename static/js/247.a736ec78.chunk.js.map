{"version":3,"file":"static/js/247.a736ec78.chunk.js","mappings":"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","sources":["components/actions/DeleteAction.js","components/actions/EditAction.js","components/actions/ViewAction.js","components/dashboardHeading/DashboardHeading.js","components/table/Table.js","pages/backend/manage/ManagePost.js"],"sourcesContent":["import { TrashIcon } from \"../icons/Icons\";\r\n\r\nfunction DeleteAction({ className, onClick, ...props }) {\r\n  return (\r\n    <div\r\n      className={`flex items-center justify-center text-xs p-1 rounded-md bg-red-500 text-white shadow-md cursor-pointer ${className}`}\r\n      {...props}\r\n      onClick={onClick}\r\n    >\r\n      <TrashIcon className=\"w-4 h-4 flex items-center justify-center\"></TrashIcon>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DeleteAction;\r\n","import { EditIcon } from \"../icons/Icons\";\r\n\r\nfunction EditAction({ className, onClick, ...props }) {\r\n  return (\r\n    <div\r\n      className={`flex items-center justify-center p-1 text-xs rounded-md bg-green-400 text-white shadow-md cursor-pointer  ${className}`}\r\n      {...props}\r\n      onClick={onClick}\r\n    >\r\n      <EditIcon className=\"w-4 h-4 flex items-center justify-center\"></EditIcon>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default EditAction;\r\n","import { EyeIcon } from \"../icons/Icons\";\r\n\r\nfunction ViewAction({ className, onClick, ...props }) {\r\n  return (\r\n    <div\r\n      className={` p-1 rounded-md bg-gray-400 text-white shadow-md cursor-pointer ${className}`}\r\n      {...props}\r\n      onClick={onClick}\r\n    >\r\n      <EyeIcon className=\"w-4 h-4 flex items-center justify-center\"></EyeIcon>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ViewAction;\r\n","import React from \"react\";\r\n\r\nconst DashboardHeading = ({ title = \"\", desc = \"\" }) => {\r\n  return (\r\n    <div className=\"mb-10\">\r\n      <h1 className=\"dashboard-heading\">{title}</h1>\r\n      <p className=\"dashboard-short-desc\">{desc}</p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DashboardHeading;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nconst TableStyles = styled.div`\r\n  overflow-x: auto;\r\n  background-color: white;\r\n  border-radius: 10px;\r\n  table {\r\n    width: 100%;\r\n  }\r\n  thead {\r\n    background-color: #f7f7f8;\r\n  }\r\n  th,\r\n  td {\r\n    vertical-align: middle;\r\n  }\r\n  th {\r\n    padding: 20px 30px;\r\n    font-weight: 600;\r\n    text-align: left;\r\n  }\r\n  td {\r\n    padding: 15px 30px;\r\n  }\r\n  tbody {\r\n  }\r\n`;\r\nconst Table = ({ children }) => {\r\n  return (\r\n    <TableStyles>\r\n      <table>{children}</table>\r\n    </TableStyles>\r\n  );\r\n};\r\n\r\nexport default Table;\r\n","import {\r\n  collection,\r\n  deleteDoc,\r\n  doc,\r\n  getDoc,\r\n  onSnapshot,\r\n} from \"firebase/firestore\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport Swal from \"sweetalert2\";\r\nimport DeleteAction from \"../../../components/actions/DeleteAction\";\r\nimport EditAction from \"../../../components/actions/EditAction\";\r\nimport ViewAction from \"../../../components/actions/ViewAction\";\r\nimport DashboardHeading from \"../../../components/dashboardHeading/DashboardHeading\";\r\nimport Table from \"../../../components/table/Table\";\r\nimport { db } from \"../../../firebase/firebase-config\";\r\n\r\nfunction ManagePost() {\r\n  const [posts, setPosts] = useState([]);\r\n  console.log({ posts });\r\n  const navigate = useNavigate();\r\n  useEffect(() => {\r\n    const colRef = collection(db, \"posts\");\r\n    onSnapshot(colRef, (snapshot) => {\r\n      let result = [];\r\n      snapshot.forEach(async (val) => {\r\n        const cateRef = await doc(db, \"categories\", val.data().categoryId);\r\n        const authRef = doc(db, \"users\", val.data().userId);\r\n        const cateSnap = await getDoc(cateRef);\r\n        const authSnap = await getDoc(authRef);\r\n\r\n        result.push({\r\n          id: val.id,\r\n          ...val.data(),\r\n          categoryId: cateSnap.data()?.name || \"\",\r\n          userId: authSnap.data()?.fullname || \"\",\r\n        });\r\n        setPosts([...result]);\r\n      });\r\n    });\r\n  }, []);\r\n  const handleDeletePost = async (post) => {\r\n    const colRef = doc(db, \"posts\", post.id);\r\n    Swal.fire({\r\n      title: \"Are you sure?\",\r\n      text: \"You won't be able to revert this!\",\r\n      icon: \"warning\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#3085d6\",\r\n      cancelButtonColor: \"#d33\",\r\n      confirmButtonText: \"Yes, delete it!\",\r\n    }).then(async (result) => {\r\n      if (result.isConfirmed) {\r\n        await deleteDoc(colRef);\r\n        Swal.fire(\"Deleted!\", \"Your file has been deleted.\", \"success\");\r\n      }\r\n    });\r\n  };\r\n  return (\r\n    <div>\r\n      <DashboardHeading\r\n        title=\"Manage Post\"\r\n        desc=\"Manage your post\"\r\n      ></DashboardHeading>\r\n      <Table>\r\n        <thead>\r\n          <tr>\r\n            <th>STT</th>\r\n            <th>Infor</th>\r\n            <th>Category</th>\r\n            <th>Author</th>\r\n            <th>Action</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {posts.length > 0 &&\r\n            posts.map((post, index) => (\r\n              <tr key={post.id}>\r\n                <td title={post.id}>{post.id.slice(0, 4) + \"...\"}</td>\r\n                <td title={post.title}>\r\n                  <div className=\"flex gap-x-2 items-center\">\r\n                    <img\r\n                      src={`${post.image_url || \"/avatar.jpg\"}`}\r\n                      alt=\"\"\r\n                      className=\"w-[40px] rounded-md shadow-md  object-cover \"\r\n                    />\r\n                    <div className=\"flex-1\">\r\n                      <h3 className=\"text-md text-gray-800 font-semibold \">\r\n                        {post.title.slice(0, 6) + \"...\"}\r\n                      </h3>\r\n                      <p className=\"text-sm text-gray-400 font-medium \">\r\n                        {new Date().toLocaleDateString()}\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                </td>\r\n                <td>{post.categoryId}</td>\r\n                <td>\r\n                  <p className=\"w-max\">{post.userId}</p>\r\n                </td>\r\n                <td>\r\n                  <div className=\"flex gap-x-2 \">\r\n                    <ViewAction\r\n                      onClick={() => navigate(`/${post.slug}`)}\r\n                    ></ViewAction>\r\n                    <EditAction\r\n                      onClick={() =>\r\n                        navigate(`/manage/update-post?id=${post.id}`)\r\n                      }\r\n                    ></EditAction>\r\n                    <DeleteAction\r\n                      onClick={() => handleDeletePost(post)}\r\n                    ></DeleteAction>\r\n                  </div>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n        </tbody>\r\n      </Table>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ManagePost;\r\n"],"names":["className","onClick","props","title","desc","TableStyles","styled","children","useState","posts","setPosts","console","log","navigate","useNavigate","useEffect","colRef","collection","db","onSnapshot","snapshot","result","forEach","val","doc","data","categoryId","cateRef","authRef","userId","getDoc","cateSnap","authSnap","push","id","name","fullname","handleDeletePost","post","Swal","text","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","then","isConfirmed","deleteDoc","length","map","index","slice","src","image_url","alt","Date","toLocaleDateString","slug"],"sourceRoot":""}